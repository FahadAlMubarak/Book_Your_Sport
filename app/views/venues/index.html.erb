<div data-controller="popup filters">
  <div class="container">
    <div class="search-bar">
      <i class="fa-solid fa-filter" data-action="click->popup#toggle"></i>
    </div>

<div data-controller="search-venues">
  <%= form_with url: venues_path, method: :get, html: {class:
    "mb-4", data: {search_venues_target: "form"}} do |f| %>
    <%= f.text_field :query,
                     class: "form-control",
                     placeholder: "Type a venue",
                     value: params[:query],
                     data: {
                        search_venues_target: "input",
                        action: "keyup->search-venues#update"
                      } %>
  <% end %>


    <!-- Add data-controller attribute to the form -->
    <form id="filter-form">

      <!-- Add data-action attribute to the checkboxes to trigger the filter -->
      <div class="form-group">
        <% @venues.each do |venue| %>
          <input type="checkbox" id="sport_<%= venue.id %>" class="form-check-input" name="venues[]" value="<%= venue.sports %>">
          <label for="sport_<%= venue.id %>" class="form-check-label"><%= venue.sports %></label><br>
        <% end %>
      </div>

      <button type="button" class="btn btn-primary" data-action="click->filters#filter">Filter</button>
    </form>

    <%= render "shared/popup" %>

    <!-- venues content -->
    <div class="index-content">
      <h1 class="h2 my-3 d-flex justify-content-center">Venues 🏐</h1>
      <div data-search-venues-target="list">
      <%= render "list", venues: @venues %>
    </div>
    </div>
  </div>
</div>
